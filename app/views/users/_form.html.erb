<%= render "shared/errors", obj: @user %>

<div class="row">
  <div class="col-xs-12">
    <%= form_for(@user, :validate => true, :html => {class: "form-horizontal", role: "form"}) do |f| %>
      <div class="form-group">
        <div class="control-label col-sm-2">
          <%= f.label :username %>
        </div>
        <div class="col-sm-8">
          <%= f.text_field :username, class: "form-control username", placeholder: "Username", autofocus: "true" %>
          <% if (@user.errors.include?(:username)) %>
            <script type="text/javascript">
              function trigger(){
                $(".username").attr("placeholder", "<%= sanitize @user.errors[:username].first %>");
                $(".username").attr("value", null);
              };
              trigger();
            </script>
          <% end %>
        </div>
      </div>
      <div class="form-group">
        <div class="control-label col-sm-2">
          <%= f.label :email %>
        </div>
        <div class="col-sm-8">
          <%= f.email_field :email, class: "form-control email", placeholder: "Email" %><br/>
          <% if (@user.errors.include?(:email)) %>
            <script type="text/javascript">
              function trigger(){
                $(".email").attr("placeholder", "<%= sanitize @user.errors[:email].first %>");
                $(".email").attr("value", null);
              };
              trigger();
            </script>
          <% end %>
        </div>
      </div>
      <div class="form-group">
        <div class="control-label col-sm-2">
          <%= f.label :password %><br/>
        </div>
        <div class="col-sm-8">
          <%= f.password_field :password, class: "form-control password", placeholder: "Password", autocomplete: "off" %><br/>
          <% if (@user.errors.include?(:password)) %>
            <script type="text/javascript">
            console.log("hello")
              function trigger(){
                $(".password").attr("placeholder", "<%= sanitize @user.errors[:password].first %>");
                $(".password").attr("value", null);
              };
              trigger();
            </script>
          <% end %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <%= f.submit(@user.new_record? ? "Sign up" : "Update account", class: "btn btn-success btn-sm submit") %>
          <button class="btn btn-primary btn-sm"><%= link_to "Cancel", articles_path %></button>
        </div>
      </div>
    <% end %>
  </div>
</div>